<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="{{ url_for('static', filename= 'css/style.css') }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />

    <title>Dockerize</title>
</head>
<body>
   <h1>DockerizeIt</h1>
   <h4 style="text-align: center">a simple tool to generate a docker file</h4>

    <form action="/get_images/" method="post">


        </form>

    <form action="/generate/" method="post">
        <!-- Chosen source Image:<input name="chosen" type="text"></input> -->
        Source Image:<select name="chosen" class="js-data-example-ajax" style="width: 25%"></select>
    <button name="generate" type="submit">Generate file</button>
</form>


</br></br>
<select class="js-data-example-ajax" style="width: 50%"></select>


{{ getImages }}
{{ generatedMessage }}

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
<script type=text/javascript src="{{url_for('static', filename='jquery.js') }}"></script>
<script>
    $(document).ready(function() {
    $('.js-data-example-ajax').select2({
  ajax: {
    url: 'https://hub.docker.com/api/content/v1/products/search',
    dataType: 'json',
    delay: 250,
    data: function (params) {
        var query = {
            q: params.term,
            page_size: '25',
            type: 'image',
            image_filter: 'official'
        }
        return query;
    },
    processResults: function (data) {
            var data_array = [];
            data.summaries.forEach(function(value,key){
                data_array.push({id:key,text:value.name});
                console.log(key + "and " + value.name);
            });

            return {
                results: data_array
            }
        }
  }
});
});
</script>

<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
</body>
</html>